From 49572c2e0a78d18f873607adee50b66c02987ef2 Mon Sep 17 00:00:00 2001
From: Yumi Yukimura <me.cafebabe@gmail.com>
Date: Sun, 20 Jul 2025 19:05:59 +0800
Subject: [PATCH 1/5] Allow to opt-out vintf_fragments and init_rc

Change-Id: Idd253f01895caf4b5c418c077d9fbe4bd69175ff
---
 Android.bp | 10 ++++++++--
 1 file changed, 8 insertions(+), 2 deletions(-)

diff --git a/Android.bp b/Android.bp
index 47b2cd8..dd1a7bf 100644
--- a/Android.bp
+++ b/Android.bp
@@ -199,8 +199,14 @@ cc_binary {
     relative_install_path: "hw",
     vendor: true,
 
-    vintf_fragments: [":drm_hwcomposer_vintf_manifest"],
-    init_rc: [":drm_hwcomposer_init_rc"],
+    vintf_fragments: select(soong_config_variable("drm_hwcomposer", "include_vintf_fragments"), {
+        false: [],
+        default: [":drm_hwcomposer_vintf_manifest"],
+    }),
+    init_rc: select(soong_config_variable("drm_hwcomposer", "include_init_rc"), {
+        false: [],
+        default: [":drm_hwcomposer_init_rc"],
+    }),
 }
 
 // Used by hwcomposer.drm_imagination
-- 
2.39.5

