From dab57ee99748851a4b68dd482d311d1784373120 Mon Sep 17 00:00:00 2001
From: Yumi Yukimura <me.cafebabe@gmail.com>
Date: Thu, 23 May 2024 04:16:01 +0800
Subject: [PATCH 07/20] init.rc: Always enable console and run as root

Change-Id: Ic24fcb9b00b804506f8fd26a1b3dc1be42617988
---
 rootdir/init.rc | 8 ++------
 1 file changed, 2 insertions(+), 6 deletions(-)

diff --git a/rootdir/init.rc b/rootdir/init.rc
index 471059bc87..666e3683a8 100644
--- a/rootdir/init.rc
+++ b/rootdir/init.rc
@@ -1297,9 +1297,8 @@ service ueventd /system/bin/ueventd
 service console /system/bin/sh
     class core
     console
-    disabled
-    user shell
-    group shell log readproc
+    user root
+    group root shell log readproc
     seclabel u:r:shell:s0
     setenv HOSTNAME console
     shutdown critical
@@ -1315,9 +1314,6 @@ on property:ro.debuggable=1
     # Give reads to anyone for the accessibility trace folder on debug builds.
     chmod 0775 /data/misc/a11ytrace
 
-on init && property:ro.debuggable=1
-    start console
-
 # Multi-Gen LRU Experiment
 on property:persist.device_config.mglru_native.lru_gen_config=none
   write /sys/kernel/mm/lru_gen/enabled 0
-- 
2.39.5

